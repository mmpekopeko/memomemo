### AIツールでの活用方法

1.  **Clineで使用する場合**:
    Clineにこのファイルを読み込ませ、「今後のコーディングはこの `DEVELOPMENT_RULE.md` に完全に従ってください」と指示してください。
2.  **GitHub Copilotで使用する場合**:
    チャット欄で `#file:DEVELOPMENT_RULE.md` と参照した上で指示を出すと、ルールに基づいたコードを生成します。


    全ての関数とコンポーネントは const + アロー関数で定義してください。function キーワードの使用は禁止です。 通常のコンポーネントは Named Export を使い、Next.jsのページ等の規定ファイルのみ末尾で Default Export してください。 ファイル名とコンポーネント名は一致させてください。





    docs/rules/policy-background.md
    # 決定版ルールの採用根拠と背景 (2026年)

本プロジェクトで採用しているコンポーネント定義ルール（②＋③のハイブリッド）が、なぜ Next.js 公式のサンプル（①）よりも優先されるのか、その技術的・戦略的背景を記録する。

---

## 1. Next.js 公式推奨（ドキュメント）との違い

Next.jsの公式ドキュメントや `create-next-app` で生成される初期コードは、今でも **① (function 宣言)** が主流である。

- **公式の書き方:** `export default function Page() { ... }`
- **採用の理由:** JavaScript/React の最も基本的で伝統的な書き方であり、初心者にとっての読みやすさ（学習コストの低さ）を優先しているため。

**結論:** 公式が ① を使っているのは、それが唯一の正解だからではなく、**「最も一般的で、誰でも理解できる最小公約数」**だからに過ぎない。

---

## 2. なぜ公式と違っても「②と③」が正解なのか

ビジネスレベルの開発、特に「AI（Cline/Copilot）との協調」と「将来の属人化排除」を目的とする場合、公式のサンプルよりも本ルールのほうが圧倒的に優位性がある。

### 公式（①：function 宣言）の弱点
- **一貫性の欠如:** 一般コンポーネント（アロー関数）とページ（function 宣言）で書き方が混在し、AIが生成時にどちらのスタイルを優先すべきか迷う原因になる。
- **名前の不一致:** `export default function` はインポート側で名前を自由に変えられてしまうため、コードベースが拡大した際に検索性が著しく低下する。

### 本ルール（②＋③：const 統一）の強み
- **AI への命令が単純:** 「このプロジェクトに `function` は存在しない」という極めてシンプルな制約により、AIの出力精度が 100% 安定する。
- **機械的な統制:** ESLint（`func-style: error`）によってルールを強制できるため、人間が規約を記憶・意識し続けるコストがゼロになる。

---

## 3. 2026年の実務トレンド

高度な TypeScript プロジェクトにおいて、**「関数宣言（function）を排除してアロー関数（const）に統一する」**手法は、現代のデファクトスタンダードとして定着している。

- **③ (Named Export):** Storybook、Unit Test、インポート時の自動補完との親和性が極めて高く、保守性が最も高い。
- **② (const + Default Export):** フレームワークの制約（default 必須）と、プロジェクトの鉄則（const 統一）を両立させるための、**実務上「最も賢い妥協点」**である。

---

## 最終結論

本ルールは Next.js 公式の「見た目（サンプルコード）」とは異なるが、**「Next.js の動作原理（default export されていれば形式は問わない）」**には完璧に従っている。

「公式の通りに書くこと」よりも、**「プロジェクト内で一貫性があり、AIが迷わず、将来誰がコードを見ても同じ構造になっていること」**の方が、1人＋AI体制の新規開発においては 100 倍重要である。



＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝


# Next.js公式との整合性と設計思想メモ（個人用）

## 結論

あなたの決定版ルール（②＋③、function禁止）は  
AI最適化設計としては非常に合理的ですが、  
Next.js公式のスタイルとは一致しません。

---

## 🔎 公式はどうなっているか（2026時点の傾向）

### ✅ page / layout

```ts
export default function Page() {
  return <div />;
}
```

公式標準は：

- default export
- function 宣言
- const + export default ではない

---

### 一般コンポーネント

公式サンプルでは：

```ts
function Button() {}
export default Button;
```

または

```ts
export function Button() {}
```

👉 function宣言は禁止していない

---

## 🎯 ではあなたのルールは間違いか？

いいえ。

| 観点 | 公式 | あなたのルール |
|------|------|----------------|
| page | function + default | const + default |
| コンポーネント | 混在OK | named export固定 |
| function宣言 | OK | 完全禁止 |

つまり：

> あなたのルールは「公式準拠」ではなく「設計思想優先」である。

---

## 🧠 設計思想の違い

### Next.js公式が優先していること

- 学習コストを下げる
- サンプルを読みやすくする
- JS初心者にも優しい

### あなたが優先していること

- AI協業
- 属人化排除
- ESLintで機械統制
- 認知負荷最小化

思想が違うだけである。

---

## ⚖️ 結論整理

✔ 公式とは一致していない  
✔ 技術的な問題はない  
✔ Next.js仕様違反ではない  
✔ AI協業前提ではむしろ合理的  

---

## READMEに書くべき表現

> 本プロジェクトでは、Next.js公式の記法とは一部異なるスタイルを採用しています。  
> これはAI協業と属人化排除を目的とした設計上の意図的な選択です。

---

## 現在の前提条件

❌ OSS公開予定なし  
❓ 外部エンジニア参加は未確定  
✅ AI協業前提  
✅ 属人化排除が最優先  

---

## なぜ②＋③で問題ないのか

- 公式とは一致しないが仕様違反ではない
- 技術的デメリットはほぼない
- AI協業効率を最大化できる

🔥 最大の価値は「AI最適化」

---

## 公式準拠を優先しなくてよい理由

公式は：

- 学習コスト低減
- 初学者配慮
- サンプル整合性

あなたのプロジェクトは：

- 実務用途
- 内部システム
- AIと継続的に開発
- ESLintで完全統制

目的が違う。

---

## 外部エンジニアが来た場合

むしろ②＋③の方が強い。

理由：

- function禁止
- defaultはpageのみ
- named export原則
- ESLintで自動強制

曖昧さがない。

---

## リスク

唯一のリスク：

「公式と違うことへの心理的不安」

技術的リスクはほぼゼロ。

---

## 2026年時点の最適解（自分の場合）

| 優先順位 | 評価 |
|----------|------|
| AI効率 | ◎ |
| 属人化排除 | ◎ |
| 公式整合 | △ |
| OSS互換性 | 不要 |

---

# 最終結論

一般：
```ts
export const Component = () => {};
```

page系：
```ts
const Page = () => {};
export default Page;
```

function宣言：完全禁止

ブレずに進んでOK。





＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝



1.
export default function Sample() {

  return (
  );
};


2.
const Sample = () => {

  return (
  );
};

export default Sample;

3.
export const Sample = () => {

  return (
  );
};





＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝










